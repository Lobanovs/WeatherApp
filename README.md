# WeatherApp

**WeatherApp** — это приложение, имитирующее работу метеорологического сенсора. Оно принимает данные о температуре и осадках, отправляемые в формате JSON, и сохраняет их в базе данных для последующего анализа. Приложение предоставляет REST API для регистрации сенсоров, отправки данных и анализа.

## Описание проекта

Проект представляет собой сервер на базе Spring Boot, который обрабатывает данные от метеорологического сенсора. Приложение принимает данные через HTTP-запросы и сохраняет их в базе данных. В случае отсутствия реального сенсора, данные могут отправляться с того же компьютера, на котором работает сервер, используя HTTP-клиент `RestTemplate`.

## Основной функционал

- **Регистрация сенсоров**: Возможность добавления новых сенсоров в систему.
- **Добавление измерений**: Прием данных о температуре и осадках от сенсора.
- **Получение данных**: Получение списка всех измерений.
- **Анализ данных**: Подсчет количества дождливых дней.

## Технологический стек

- **Backend**: Java, Spring Boot
- **База данных**: PostgreSQL
- **HTTP-клиент**: RestTemplate

## Требования

- **Java** 17+
- **Maven** 
- **PostgreSQL** 

## Установка

### 1. Клонирование репозитория:
   ```bash
   git clone https://github.com/your-username/WeatherApp.git
   ```
   
### 2. Настройка базы данных
Перед запуском приложения выполните следующий SQL-скрипт для создания необходимых таблиц и вставки начальных данных:

```sql
create table Sensor(
    id int generated by default as identity primary key,
    name varchar unique not null
);

insert into Sensor (name) values ('1');

create table Measurements(
    id int generated by default as identity primary key,
    value decimal not null,
    raining boolean not null,
    sensor_id int references Sensor(id) on delete cascade not null,
    created_at timestamp not null
);

insert into Measurements (value, raining, sensor_id, created_at) 
VALUES (24.5, true, 8, now());

);
```
### 3. Настройка конфигурации
Создайте файл `application.properties` (или используйте `application.yml`) в директории `src/main/resources` и добавьте настройки для подключения к вашей базе данных. Например:

```properties
spring.datasource.url=jdbc:postgresql://localhost:5432/cosmoport
spring.datasource.username=ваш_пользователь
spring.datasource.password=ваш_пароль
spring.jpa.hibernate.ddl-auto=update
```
## Запуск приложения

1. Соберите проект с помощью Maven:
   ```bash
   mvn clean install
   ```

2. Запустите приложение:
   ```bash
   mvn spring-boot:run
   ```
Приложение будет доступно по адресу: `http://localhost:8080`.




